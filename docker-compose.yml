services:
  sheets-sync:
    image: node:18-alpine
    container_name: sheets-sync
    working_dir: /app
    volumes:
      - ./:/app
      - ${OUTPUT_DIR}:/app/output
      - node_modules:/app/node_modules
    environment:
      - NODE_ENV=production
      - OUTPUT_DIR=/app/output
      - OUTPUT_FILE_NAME=${OUTPUT_FILE_NAME:-datos_excel.xlsx}
    restart: "no"
    command: >
      sh -c "
        echo 'ðŸš€ Google Sheets to Excel Sync' &&
        npm install --only=production &&
        mkdir -p /app/output &&
        node src/simple-sync.js
      "

volumes:
  node_modules: